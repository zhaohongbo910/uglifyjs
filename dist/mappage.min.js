"use strict";var _mapMapper,viewer;$(document).ready(function(){_mapMapper='viewer = new Cesium.Viewer(\t"MapViewer", {\torderIndependentTranslucency: false, \t\t\tcontextOptions: { \t\t\t\twebgl: {\t\t\t\t\talpha: true\t\t\t\t}\t\t\t}, \t\t\tanimation: false,\t\t\t\tbaseLayerPicker: true,\t\t\t\tgeocoder: true, \t\t\ttimeline: false,\t\t\tsceneModePicker: true,\t\t\t\tnavigationHelpButton: false,\t\t\tinfoBox: true,\t\t\tterrainProvider: Cesium.createWorldTerrain()\t\t}\t);\tviewer.scene.skyBox.show = false;    viewer.scene.backgroundColor = new Cesium.Color(0.0, 0.0, 0.0, 0.0);\tloadLayer();',$(function(){$("[data-toggle='tooltip']").tooltip()});var mbox=new Cesium.MapboxImageryProvider({mapId:"mapbox.satellite",accessToken:"sk.eyJ1IjoibGVibGl1IiwiYSI6ImNqc2ptaXd1eTB0aXY0YXRiMXpxYnV5dGQifQ.1iFUUuHIT07d0zp_pZ8K1Q"});$("#MapViewer").css({height:"100%",display:"block"}),Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIyOTk0ODgxNC0zYjhhLTQ1MDUtYjRiYy1kMmUzMzYyMTkzN2UiLCJpZCI6MTAzNTcsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NTYyNDQ0MTd9.zIAKracS9KnAN168xdPklxjDkmdJ1is3UZ0MfpEUcOY",eval(_mapMapper),Cesium.Camera.DEFAULT_VIEW_RECTANGLE=Cesium.Rectangle.fromDegrees(116.1949,39.6345,117.3949,34.8345),viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(116.2949,39.8345,9e6)}),viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),show3DCoordinates();var options=[{text:"清理图层",onselect:function(){for(var e=viewer.imageryLayers.length;0<e;e--)viewer.imageryLayers.remove(viewer.imageryLayers.get(e))}},{text:"高德标注",onselect:function(){var e=new Cesium.UrlTemplateImageryProvider({url:"http://webst02.is.autonavi.com/appmaptile?x={x}&y={y}&z={z}&lang=zh_cn&size=1&scale=1&style=8"});viewer.imageryLayers.addImageryProvider(e)}},{text:"天地标注",onselect:function(){var e=new Cesium.WebMapTileServiceImageryProvider({url:"http://t2.tianditu.com/cia_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=cia&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default.jpg&tk=cbadcd7ec0549b46c597e127199576d6",layer:"tdtAnnoLayer",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible"});viewer.imageryLayers.addImageryProvider(e)}}];Sandcastle.addToolbarMenu(options)});var Map={flytodst:function flytodst(e){setLayout(0),$.ajax({url:"http://47.240.13.42/xearth/earth-map/test",type:"post",data:"itemid="+e,dataType:"json",success:function(e){var t=9e6;switch(e.id){case"11":t=9e5;break;case"111":case"112":case"113":t=900}viewer.entities.add({name:e.name,position:Cesium.Cartesian3.fromDegrees(e.longitude,e.latitude),description:e.description,label:{text:e.name,font:"30px MicroSoft YaHei",scale:.5,fillColor:Cesium.Color.RED,showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-32)},billboard:{image:"/image/catalog/point0"+e.id%10+".png",disableDepthTestDistance:Number.POSITIVE_INFINITY,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,scale:.5}});viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(e.longitude,e.latitude,t)})},error:function(e,t,i){alert(i+"\r\n"+e.statusText+"\r\n"+e.responseText)}})},flytodst2:function flytodst2(i,e,t,a,r){setLayout(0),$.ajax({url:"http://47.240.13.42/xearth/earth-map/test",type:"post",data:"itemid="+i+"&location_x="+e+"&location_y="+t+"&time="+a+"&name="+r,dataType:"json",success:function(e){var t=9e6;switch(i){case 11:t=9e5;break;case 111:case 112:case 113:t=900;break;case 200:case 300:t=9e3}viewer.entities.add({name:e.name,position:Cesium.Cartesian3.fromDegrees(e.longitude,e.latitude),description:e.description,label:{text:e.name,font:"30px MicroSoft YaHei",scale:.5,fillColor:Cesium.Color.RED,showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-32)},billboard:{image:"/image/catalog/point0"+e.id%10+".png",disableDepthTestDistance:Number.POSITIVE_INFINITY,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,scale:.5}});viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(e.longitude,e.latitude,t)})},error:function(e,t,i){alert(i+"\r\n"+e.statusText+"\r\n"+e.responseText)}})},flytodst3:function flytodst3(e){var t=9e6;switch(e.lev){case"1":t=9e5;break;case"2":t=9e4;break;case"3":t=9e3;break;case"4":t=900}viewer.entities.add({name:e.text,position:Cesium.Cartesian3.fromDegrees(e.lng,e.lat),description:e.text,label:{text:e.text,font:"30px MicroSoft YaHei",scale:.5,fillColor:Cesium.Color.RED,showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-32)},billboard:{image:"/image/catalog/point0"+e.id%10+".png",disableDepthTestDistance:Number.POSITIVE_INFINITY,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,scale:.5}});viewer.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(e.lng,e.lat,t)})}},newslist={DisplayContent:function DisplayContent(e,t){$("#modal-doc").remove(),html='<div id="modal-doc" class="modal fade">',html+='  <div class="modal-dialog" >',html+='    <div class="modal-content">',html+='      <div class="modal-header">',html+='        <h4 class="modal-title " align="center">'+e+"</h4>",html+='        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>',html+="      </div>",html+='      <div class="modal-body" >'+t+"</div>",html+='      <div class="modal-footer"> <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button> </div>',html+="    </div>",html+="  </div>",html+="</div>",$("body").append(html),$("#modal-doc").modal("show")}},loadLayer=function loadLayer(){var e=[],t=new Cesium.ProviderViewModel({name:"Bing地图",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/bingAerial.png",tooltip:"Bing地图服务 ",creationFunction:function(){return new Cesium.BingMapsImageryProvider({url:"https://dev.virtualearth.net",key:"AiasCD9Fx29JpVQYBhEv_SpFXjPGK_urgLzrcfdK5dy7Hoa1LEfHQEUwuXsP73AB",mapStyle:Cesium.BingMapsStyle.AERIAL})}});e.push(t);var i=new Cesium.ProviderViewModel({name:"ArcGIS",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/esriNationalGeographic.png",tooltip:"ArcGIS 地图服务 ",creationFunction:function(){return new Cesium.ArcGisMapServerImageryProvider({url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"})}});e.push(i);var a=new Cesium.ProviderViewModel({name:"OpenStreet",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/openStreetMap.png",tooltip:"OpenStreetMap 地图服务 ",creationFunction:function(){return new Cesium.createOpenStreetMapImageryProvider({url:"https://a.tile.openstreetmap.org/"})}});e.push(a);var r=new Cesium.ProviderViewModel({name:"MapBox街",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/mapboxStreets.png",tooltip:"MapBox街区地图",creationFunction:function(){return new Cesium.MapboxImageryProvider({mapId:"mapbox.streets",accessToken:"sk.eyJ1IjoibGVibGl1IiwiYSI6ImNqc2ptaXd1eTB0aXY0YXRiMXpxYnV5dGQifQ.1iFUUuHIT07d0zp_pZ8K1Q"})}});e.push(r);var o=new Cesium.ProviderViewModel({name:"MapBox星",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/mapboxSatellite.png",tooltip:"MapBox卫星地图",creationFunction:function(){return new Cesium.MapboxImageryProvider({mapId:"mapbox.satellite",accessToken:"sk.eyJ1IjoibGVibGl1IiwiYSI6ImNqc2ptaXd1eTB0aXY0YXRiMXpxYnV5dGQifQ.1iFUUuHIT07d0zp_pZ8K1Q"})}});e.push(o);var s=new Cesium.ProviderViewModel({name:"天地矢量",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/tdt.jpg",tooltip:"天地矢量地图",creationFunction:function(){return new Cesium.WebMapTileServiceImageryProvider({url:"http://t3.tianditu.com/vec_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=vec&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=cbadcd7ec0549b46c597e127199576d6",layer:"tdtVecBasicLayer",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible"})}});e.push(s);var n=new Cesium.ProviderViewModel({name:"天地影像",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/timg.jpg",tooltip:"天地影像地图",creationFunction:function(){return new Cesium.WebMapTileServiceImageryProvider({url:"http://t3.tianditu.com/img_w/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=img&tileMatrixSet=w&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles&tk=cbadcd7ec0549b46c597e127199576d6",layer:"tdtBasicLayer",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible"})}});e.push(n);var l=new Cesium.ProviderViewModel({name:"谷歌区划",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/google1.jpg",tooltip:"谷歌行政区划",creationFunction:function(){return new Cesium.UrlTemplateImageryProvider({url:"http://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i345013117!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible"})}});e.push(l);var c=new Cesium.ProviderViewModel({name:"谷歌影像",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/google.jpg",tooltip:"谷歌影像地图",creationFunction:function(){return new Cesium.UrlTemplateImageryProvider({url:"http://mt2.google.cn/vt/lyrs=y&hl=zh-CN&gl=CN&src=app&x={x}&y={y}&z={z}&s=G",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible"})}});e.push(c);var m=new Cesium.ProviderViewModel({name:"高德影像",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/gaode.jpeg",tooltip:"高德影像地图",creationFunction:function(){return new Cesium.UrlTemplateImageryProvider({url:"https://webst02.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible"})}});e.push(m);var d=new Cesium.ProviderViewModel({name:"高德街道",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/gaode.jpg",tooltip:"高德街道地图",creationFunction:function(){return new Cesium.UrlTemplateImageryProvider({url:"http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",style:"default",format:"image/jpeg",tileMatrixSetID:"GoogleMapsCompatible"})}});e.push(d);var u=new Cesium.ProviderViewModel({name:"百度街道",iconUrl:"/static/Cesium/Widgets/Images/ImageryProviders/bingRoads.png",tooltip:"百度街道地图",creationFunction:function(){return new Cesium.createTileMapServiceImageryProvider({url:"/GlobalTMS/北京_瓦片：TMS",credit:"北京市"})}});e.push(u);var p=[],g=new Cesium.ProviderViewModel({name:"ArcticDEM",tooltip:"自动生成高分辨率",iconUrl:"/static/Cesium/Widgets/Images/TerrainProviders/Artic.jpg",creationFunction:function(){return new Cesium.CesiumTerrainProvider({url:Cesium.IonResource.fromAssetId(3956)})}});p.push(g);var v=new Cesium.ProviderViewModel({name:"PAMap",tooltip:"宾州高清淅度地形",iconUrl:"/static/Cesium/Widgets/Images/TerrainProviders/Pamap.jpeg",creationFunction:function(){return new Cesium.CesiumTerrainProvider({url:Cesium.IonResource.fromAssetId(3957)})}});p.push(v);var C=new Cesium.ProviderViewModel({name:"世界地形",tooltip:"Cesium World Terrain",iconUrl:"/static/Cesium/Widgets/Images/TerrainProviders/CesiumWorldTerrain.png",creationFunction:function(){return new Cesium.CesiumTerrainProvider({url:Cesium.IonResource.fromAssetId(1),requestWaterMask:!0,requestVertexNormals:!0})}});p.push(C),viewer.baseLayerPicker.viewModel.imageryProviderViewModels=e,viewer.baseLayerPicker.viewModel.terrainProviderViewModels=p},itemnum={bar:function bar(e){setLayout(0),e.css({height:"34%"});var s=echarts.init(e[0]);$.ajax({url:"/earth/statistic",type:"post",data:"tableid=1",dataType:"json",success:function(e){for(var t=Array(),i=Array(),a=Array(),r=0;r<e.length;r++)t.push(e[r].disname.substring(0,e[r].disname.indexOf("区域"))),i.push(e[r].gj),a.push(e[r].notgj);var o={backgroundColor:"rgba(0,0,0,70)",title:{text:"在建项目统计图",x:"center",y:"bottom"},tooltip:{},legend:{data:["国际","非国际"]},xAxis:{data:t},yAxis:{},series:[{name:"国际",stack:"sum",type:"bar",data:i},{name:"非国际",stack:"sum",type:"bar",data:a}]};s.setOption(o)},error:function(e,t,i){alert(i+"\r\n"+e.statusText+"\r\n"+e.responseText)}})},pie:function pie(e){e.css({height:"34%"});var r=echarts.init(e[0]);$.ajax({url:"/earth/statistic",type:"post",data:"tableid=1",dataType:"json",success:function(e){for(var t=Array(),i=0;i<e.length;i++)t.push({name:e[i].disname.substring(0,e[i].disname.indexOf("区域")),value:parseInt(e[i].gj)+parseInt(e[i].notgj)});var a={backgroundColor:"rgba(0,0,0,70)",title:{text:"区域项目统计",x:"center",y:"bottom"},tooltip:{},series:[{type:"pie",data:t}]};r.setOption(a)},error:function(e,t,i){alert(i+"\r\n"+e.statusText+"\r\n"+e.responseText)}})},table:function table(t){t.css({height:"32%"}),$.ajax({url:"/earth/statistic",type:"post",data:"tableid=0",dataType:"html",success:function(e){t.html(e)}})}},curLayout=0,setLayout=function setLayout(layout){if(curLayout!=layout)switch(curLayout=layout,layout){case 0:$("#MapViewer").css({height:"100%"}),$("#MapViewer").html(""),$("#FileContent").hide(),$("#toolbar").show(),eval(_mapMapper);break;case 1:$("#MapViewer").css({height:"50%","overflow-y":"auto"}),$("#FileContent").css({height:"50%"}),$("#toolbar").hide(),$("#MapViewer").show(),$("#FileContent").show()}},show3DCoordinates=function show3DCoordinates(){var e=document.createElement("div");$("#MapViewer").append(e),e.className="mapfootBottom";var l=document.getElementById(void 0+"_coordinates");if(l)l.style.display="block";else{(l=document.createElement("div")).id=void 0+"_coordinates",l.className="map3D-coordinates",l.innerHTML="<span id='cd_label' style='font-size:13px;text-align:center;font-family:微软雅黑;color:#edffff;'>暂无坐标信息</span>",$("#MapViewer").append(l),new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas).setInputAction(function(e){var t=new Cesium.Cartesian2(e.endPosition.x,e.endPosition.y);if(t){var i=viewer.scene.globe.pick(viewer.camera.getPickRay(t),viewer.scene);if(i){var a=viewer.scene.globe.ellipsoid.cartesianToCartographic(i);if(a){var r=viewer.scene.globe.getHeight(a),o=Math.sqrt(viewer.scene.camera.positionWC.x*viewer.scene.camera.positionWC.x+viewer.scene.camera.positionWC.y*viewer.scene.camera.positionWC.y+viewer.scene.camera.positionWC.z*viewer.scene.camera.positionWC.z),s=Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z),n=[a.longitude/Math.PI*180,a.latitude/Math.PI*180];r=r||0,o=o||0,s=s||0,n=n||[0,0],l.innerHTML="<span id='cd_label' style='font-size:13px;text-align:center;font-family:微软雅黑;color:#edffff;'>视角海拔高度:"+(o-s).toFixed(2)+"米&nbsp;&nbsp;&nbsp;&nbsp;海拔:"+r.toFixed(2)+"米&nbsp;&nbsp;&nbsp;&nbsp;经度："+n[0].toFixed(6)+"&nbsp;&nbsp;纬度："+n[1].toFixed(6)+"</span>"}}}},Cesium.ScreenSpaceEventType.MOUSE_MOVE)}},showAroundResourceForEarth=function showAroundResourceForEarth(e,t,i,a,r,o){viewer.entities.add({name:e,position:Cesium.Cartesian3.fromDegrees(t,i),description:o,label:{text:e+"\n\r"+a,font:"30px MicroSoft YaHei",scale:.5,fillColor:Cesium.Color.RED,showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-32)},billboard:{image:r,disableDepthTestDistance:Number.POSITIVE_INFINITY,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,scale:.5}})};